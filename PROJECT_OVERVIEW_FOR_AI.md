# شرح عام لمشروع JoinWork – للاستخدام مع مساعد ذكاء اصطناعي

هذا المستند يوضح المشروع بالكامل: ماذا استُخدم، كيف يعمل، ولماذا صُنع، مع مسارات جميع الملفات ووصفها. يمكنك نسخه وإرساله لمساعد ذكاء اصطناعي آخر لمساعدتك.

---

## ١. اسم المشروع والغرض

- **الاسم الرسمي:** JoinWork (انضمام للعمل)
- **الاسم العربي في الواجهة:** JoinWork – منصة ربط الخريجين بفرص العمل والتدريب
- **الغرض:** منصة ويب رقمية تربط **الخريجين العراقيين** بفرص العمل والتدريب، وتُتيح للشركات نشر الوظائف وإدارة التقديمات، وللوزارة/الجامعات الاطلاع على إحصائيات وتدريب الخريجين. النظام يولد سيرة ذاتية (CV) تلقائياً من بيانات الخريج.

---

## ٢. ماذا استُخدم في المشروع

### الواجهة الأمامية (Frontend)

| التقنية | الاستخدام |
|--------|-----------|
| **HTML** | هيكل جميع الصفحات (تسجيل، دخول، لوحة تحكم، وظائف، ورش، ملف شخصي، بوابة شركة، بوابة وزارة، إلخ). |
| **CSS** | التنسيق: ألوان، خطوط، شبكات، أزرار، بطاقات، وضع ليلي/نهاري. الملفات: `theme.css` (المتغيرات)، `main.css`، `components.css`، `ministry.css`. |
| **JavaScript (عادي، بدون إطار)** | منطق الصفحات: استدعاء الـ API، التحقق من الدور، حفظ التوكن والمستخدم في `localStorage`، توليد السيرة الذاتية، تصدير PDF، تبديل الوضع الليلي، التحقق من الصلاحيات. |

**ملاحظة:** لا يوجد React/Vue/Angular؛ الواجهة ثابتة (HTML/CSS/JS) تتصل بالـ Backend عبر **REST API** و **fetch**.

### الخادم الخلفي (Backend)

| التقنية | الاستخدام |
|--------|-----------|
| **Python 3** | لغة الخادم. |
| **Flask** | إطار ويب لتشغيل الخادم وتعريف مسارات الـ API. |
| **Flask-CORS** | السماح بطلبات من نطاق الواجهة (متصفح) إلى الخادم (تفعيل CORS). |
| **PyJWT** | إنشاء وتحقق من رموز JWT للمصادقة. |
| **hashlib (SHA-256)** | تشفير كلمات المرور قبل حفظها (يُنصح بـ bcrypt في الإنتاج). |
| **python-docx** | مستخدم في سكربت منفصل لتوليد تقرير التخرج (Word)، وليس داخل تطبيق JoinWork نفسه. |

### التخزين وقاعدة البيانات

- **حالياً:** التخزين ليس بقاعدة بيانات SQL حية، بل:
  - مصفوفات في الذاكرة (قوائم Python: `users`, `graduates`, `companies`, `jobs`, `applications`, `workshops`).
  - عند بدء التشغيل تُحمَّل البيانات من ملفات **JSON** داخل مجلد `backend/data/`.
  - بعد كل عملية إضافة/تعديل/حذف تُحفَظ البيانات في نفس ملفات JSON (استمرارية البيانات بعد إعادة تشغيل الخادم).
- **ملف schema.sql:** يصف هيكل قاعدة بيانات افتراضية (جداول، علاقات، فهارس، views) للمرجع ولمرحلة لاحقة إذا تم الانتقال إلى MySQL/PostgreSQL.

### الأمان والصلاحيات

- **المصادقة:** تسجيل الدخول يعيد **JWT**. الواجهة تخزن التوكن في `localStorage` وترسله في هيدر `Authorization: Bearer <token>` لكل طلب محمي.
- **التحقق من التوكن:** دالة `token_required` في الخادم تتحقق من JWT وتُرفق المستخدم الحالي بـ `request.current_user`.
- **التحكم بالوصول حسب الدور (RBAC):** ثلاثة أدوار: `graduate`، `company`، `ministry`. الديكورات `@role_required(['graduate'])` وغيرها تحدّد من يمكنه استدعاء كل endpoint. في الواجهة، الدالة `enforceRole(requiredRoles)` تتحقق من دور المستخدم من `localStorage` وإذا لم يكن مسموحاً تُوجّه إلى صفحة "الوصول مرفوض" (`access-denied.html`).

### الربط بين الواجهة والخادم

- **الواجهة:** تعمل كصفحات ثابتة تُفتح في المتصفح (من خادم ملفات أو مباشرة).
- **الخادم:** Flask يعمل على عنوان مثل `http://localhost:3000` (أو المنفذ المحدد في التشغيل).
- **العنوان الثابت في الكود:** في `frontend/js/api.js` المتغير `API_BASE_URL = 'http://localhost:3000/api'` — جميع استدعاءات الـ API تذهب إلى هذا العنوان.
- **البروتوكول:** HTTP، طلبات **REST** (GET, POST, PUT, DELETE) مع جسم JSON عند الحاجة.

---

## ٣. كيف يعمل المشروع

### المعمارية العامة

- **عميل (المتصفح):** يعرض HTML/CSS ويشغّل JavaScript.
- **خادم (Flask):** يستقبل الطلبات على `/api/...`، يتحقق من JWT والدور، يقرأ/يكتب من القوائم في الذاكرة ويُحدّث ملفات JSON.
- **التخزين:** ملفات JSON في `backend/data/` + قوائم في الذاكرة.

### تدفق المستخدم حسب الدور

1. **خريج (graduate):** يسجّل أو يدخل → يُخزَن التوكن وبيانات المستخدم (بما فيها `role`) → يصل إلى لوحة التحكم، الوظائف، الورش، الملف الشخصي. من الملف الشخصي يملأ بياناته ويولّد السيرة الذاتية (عرض HTML وتصدير PDF من الواجهة). يقدّم على الوظائف عبر زر "تقديم" في صفحة الوظائف؛ الخادم يتحقق من أن الدور خريج ويُسجّل طلب تقديم.
2. **شركة (company):** تسجّل بحساب شركة → تدخل إلى بوابة الشركة → تنشر وظائف، تعرض "طلبات التقديم" لكل وظيفة، تقبل أو ترفض الطلبات، وترى الملف الشخصي للخريج. الخادم يتحقق من أن المستخدم شركة قبل إنشاء/تعديل/حذف الوظائف وتحديث حالة التقديمات.
3. **وزارة (ministry):** حساب وزارة → بوابة وزارة وصفحات وزارية (إعلانات، ورش، تقارير، إلخ). الواجهة تتحقق من الدور وتوجّه غير المسموح إلى صفحة الوصول المرفوض.

### آلية عمل مهمة (مثال: التقديم على وظيفة)

- الواجهة: المستخدم يضغط "تقديم" → استدعاء `jobsAPI.apply(jobId, coverLetter)` في `api.js` → طلب `POST /api/jobs/<job_id>/apply` مع التوكن في الهيدر.
- الخادم: `token_required` ثم `role_required(['graduate'])`، إن لم يكن لديه ملف خريج يُنشأ واحد افتراضي، ثم يُضاف سجل في `applications` ويُحفَظ في `applications.json`.

---

## ٤. لماذا صُنع المشروع

- **سياق:** مشروع تخرج — معالجة مشكلة بطالة الخريجين وعدم وجود منصة موحدة تربطهم بالشركات والتدريب.
- **أهداف:** توفير منصة رقمية واحدة للخريجين (إنشاء ملف شخصي، سيرة ذاتية، التقديم على الوظائف والورش)، وللشركات (نشر وظائف وإدارة التقديمات)، وللجهات الرسمية (إحصائيات وورش). تعزيز التوظيف والتدريب في العراق عبر أداة ويب حديثة.

---

## ٥. مسارات الملفات ووصفها (Paths ووصف مختصر)

**الجذر للمشروع (حسب بيئة العمل):**  
مجلد المشروع اسمه عادةً `Graduate Employment` وقد يكون المسار مثل:  
`.../Graduate Employment/` أو `.../أمير/مشروعي/Graduate Employment/`

يُفترض أن المسارات التالية نسبةً إلى **جذر المشروع**.

---

### الجذر (Root)

| المسار | الوصف |
|--------|--------|
| `README.md` | نظرة عامة على المشروع، الهيكل، الميزات، الأمان، التعريفات. |
| `PROJECT_STRUCTURE.md` | هيكل المجلدات والملفات ووصف الملفات (نسخة أقدم قد لا تعكس كل التعديلات الحالية). |
| `PROJECT_OVERVIEW_FOR_AI.md` | هذا الملف — الشرح الموجه لمساعد ذكاء اصطناعي. |
| `HOW_TO_RUN.md` | تعليمات تشغيل المشروع. |
| `QUICK_START.md` | بداية سريعة للتشغيل. |
| `FIX_AND_RUN.md` | حلول مشاكل التشغيل. |
| `BACKEND_SETUP.md` | إعداد الخادم الخلفي. |
| `docs/API.md` | توثيق واجهة الـ API (المسارات، أمثلة الطلب والاستجابة). |
| `.gitignore` | ملفات/مجلدات يُتجاهلها Git. |
| `package.json` | إن وُجد في الجذر — إعدادات npm للمشروع (قد تُستخدم لسكربتات). |
| `server.js` | إن وُجد — خادم Node (قد يُستخدم لخدمة الملفات أو البروكسي). |
| `start-server.py` | سكربت Python لبدء خادم HTTP بسيط لخدمة ملفات **الواجهة** (مجلد frontend) على منفذ معيّن؛ لا يشغّل Flask. |
| `create_thesis_document.py` | سكربت منفصل لتوليد تقرير التخرج (Word) باستخدام python-docx؛ لا يدخل في تشغيل JoinWork. |
| `Graduation_Project_Ameer.docx` / `Final Year Project Report - Ameer Dawod Salman.docx` | مخرجات تقرير التخرج (إن وُجدت). |
| `OPEN_IN_BROWSER.bat` | اختصار لفتح المتصفح. |
| `SIMPLE_START.bat` | تشغيل مبسط. |
| `START_SERVER.bat` | تشغيل الخادم. |
| `START_BACKEND.bat` | تشغيل الخادم الخلفي. |
| `START_BACKEND_PYTHON.bat` | تشغيل الخادم الخلفي (Python/Flask). |

---

### الواجهة الأمامية (Frontend)

| المسار | الوصف |
|--------|--------|
| `frontend/index.html` | الصفحة الرئيسية (Landing): عنوان JoinWork، أزرار تسجيل الدخول وإنشاء حساب، دعم عربي/إنجليزي ووضع ليلي. |
| `frontend/css/theme.css` | متغيرات التصميم: ألوان، خطوط، مسافات، ظلال، وضع ليلي. |
| `frontend/css/main.css` | التنسيق الرئيسي؛ قد يستورد theme وcomponents. |
| `frontend/css/components.css` | مكونات مشتركة: أزرار، بطاقات، حقول إدخال، هيدر، فوتر. |
| `frontend/css/ministry.css` | تنسيقات خاصة بصفحات الوزارة. |
| `frontend/js/api.js` | عميل الـ API: دالة `apiRequest`، وواجهات `authAPI`, `graduatesAPI`, `jobsAPI`, `companiesAPI`, `workshopsAPI`, `applicationsAPI`, `analyticsAPI`, `cvAPI`. العنوان الثابت: `http://localhost:3000/api`. |
| `frontend/js/auth.js` | دوال المصادقة في الواجهة: `initAuth`, `getCurrentUser`, `hasRole`, `requireRole`. |
| `frontend/js/utils.js` | أدوات مشتركة: تنسيق التاريخ والعملة، التحقق من البريد وكلمة المرور، تحويل المهارات، **الوضع الليلي** (`toggleDarkMode`, `initDarkMode`)، **التحكم بالدور** (`enforceRole`, `getUserRole`, `isAuthenticated`)، وعرض رسائل الخطأ والنجاح. |
| `frontend/js/cv-generator.js` | توليد HTML السيرة الذاتية من بيانات الملف الشخصي؛ قد يتكامل مع تصدير PDF (مثل html2canvas + jsPDF في الصفحة). |
| `frontend/js/cv-templates.js` | قوالب/أنماط لعرض السيرة الذاتية. |
| `frontend/js/ministry-data.js` | بيانات أو دوال خاصة بواجهة الوزارة. |
| `frontend/components/header.html` | مقطع HTML للهيدر المشترك (روابط، تسجيل خروج، زر الوضع الليلي، نصوص ثنائية اللغة). |
| `frontend/components/footer.html` | مقطع HTML للفوتر المشترك (اسم المشروع، روابط، تواصل). |

---

### صفحات الواجهة (Frontend Pages)

| المسار | الوصف |
|--------|--------|
| `frontend/pages/login.html` | صفحة تسجيل الدخول (بريد/كلمة مرور)، إرسال إلى `/api/auth/login`، حفظ التوكن وبيانات المستخدم وتوجيه حسب الدور. |
| `frontend/pages/signup.html` | تسجيل مستخدم جديد (خريج/شركة/وزارة)، حقول إضافية للخريج (تاريخ ميلاد، جنس)، اختياري رفع صورة للسيرة الذاتية؛ إرسال إلى `/api/auth/signup`. |
| `frontend/pages/dashboard.html` | لوحة تحكم الخريج: روابط سريعة للملف الشخصي، الوظائف، الورش. |
| `frontend/pages/profile.html` | الملف الشخصي للخريج: عرض/تعديل البيانات، توليد السيرة الذاتية، تصدير PDF، طباعة، قوالب السيرة الذاتية. |
| `frontend/pages/jobs.html` | قائمة الوظائف، فلترة (موقع، نوع عمل، مهارات)، أزرار تقديم وحفظ وظيفة. |
| `frontend/pages/workshops.html` | قائمة الورش التدريبية، فلترة، زر الانضمام. |
| `frontend/pages/company-portal.html` | بوابة الشركة: تبويبات (لوحة، نشر وظيفة، وظائفي، التقديمات، بحث خريجين)، إدارة الوظائف وعرض التقديمات وقبول/رفض وعرض الملف الشخصي للمتقدّم. |
| `frontend/pages/ministry-portal.html` | بوابة الوزارة: روابط للصفحات الوزارية. |
| `frontend/pages/access-denied.html` | صفحة "الوصول مرفوض" عند محاولة دخول صفحة لا يسمح فيها بدور المستخدم. |
| `frontend/pages/database-viewer.html` | أداة تطوير لعرض محتوى "قاعدة البيانات" (المستخدمون، الخريجون، الشركات، الوظائف، التقديمات، الورش) عبر استدعاء `/api/admin/database`. |

---

### صفحات الوزارة (Ministry sub-pages)

| المسار | الوصف |
|--------|--------|
| `frontend/pages/ministry/announcements.html` | الإعلانات. |
| `frontend/pages/ministry/workshops.html` | ورش الوزارة. |
| `frontend/pages/ministry/registrations.html` | التسجيلات. |
| `frontend/pages/ministry/reports.html` | التقارير. |
| `frontend/pages/ministry/services.html` | الخدمات. |
| `frontend/pages/ministry/contact.html` | التواصل. |
| `frontend/pages/ministry/admin-announcements.html` | إدارة الإعلانات. |
| `frontend/pages/ministry/admin-workshops.html` | إدارة الورش. |
| `frontend/pages/ministry/admin-registrations.html` | إدارة التسجيلات. |
| `frontend/pages/ministry/admin-messages.html` | إدارة الرسائل. |

---

### الخادم الخلفي (Backend)

| المسار | الوصف |
|--------|--------|
| `backend/app.py` | **الملف الرئيسي للخادم:** تطبيق Flask، تحميل/حفظ JSON، مصادقة JWT، ديكورات `token_required` و`role_required`، مسارات: `/api/auth/signup`, `/api/auth/login`, `/api/auth/me`، `/api/graduates/...`، `/api/jobs/...`، `/api/jobs/<id>/apply`، `/api/jobs/<id>/applications`، `/api/applications/<id>` (PUT)، `/api/companies/...`، `/api/workshops`، `/api/health`، `/api/admin/database`. |
| `backend/requirements.txt` | تبعيات Python: Flask, flask-cors, PyJWT, python-docx. |
| `backend/data/users.json` | تخزين المستخدمين (بريد، هاش كلمة المرور، دور، إلخ). |
| `backend/data/graduates.json` | ملفات بيانات الخريجين (ربطهم بـ user_id). |
| `backend/data/companies.json` | بيانات الشركات. |
| `backend/data/jobs.json` | الوظائف المنشورة. |
| `backend/data/applications.json` | طلبات التقديم على الوظائف. |
| `backend/data/*.json` | أي ملف JSON آخر في `data/` يخص التخزين. |
| `backend/server.js` | إن وُجد — قد يكون خادم Node ثانوي أو بروكسي. |
| `backend/package.json` | إن وُجد — إعدادات npm داخل مجلد الخادم. |

---

### قاعدة البيانات (المرجع فقط)

| المسار | الوصف |
|--------|--------|
| `database/schema.sql` | تعريف الجداول (Users, Graduates, Companies, Jobs, Applications, Workshops, WorkshopRegistrations, SavedJobs) والعلاقات والفهارس والـ Views؛ للمرجع أو للترحيل لاحقاً إلى SQL حقيقي. |

---

### ملفات أخرى قد تظهر

| المسار | الوصف |
|--------|--------|
| `open-browser.html` | صفحة مساعدة لفتح المتصفح أو روابط. |

---

## ٦. ملخص سريع للمساعد الآخر

- **المشروع:** منصة ويب JoinWork لربط الخريجين العراقيين بالوظائف والتدريب، مع أدوار: خريج، شركة، وزارة.
- **Frontend:** HTML + CSS + JavaScript (بدون إطار)، اتصال عبر `fetch` إلى `http://localhost:3000/api`، تخزين JWT وبيانات المستخدم في `localStorage`، تحكم بالدور في `utils.js` و`enforceRole`.
- **Backend:** Python + Flask في `backend/app.py`، مصادقة JWT، RBAC، تخزين في ذاكرة + ملفات JSON في `backend/data/`.
- **لا يوجد قاعدة بيانات SQL حية حالياً** — الاستمرارية عبر JSON؛ و`database/schema.sql` للمرجع فقط.
- **للمساعدة في أي جزء:** استخدم المسارات أعلاه للتنقل؛ المنطق الأساسي في `backend/app.py` و`frontend/js/api.js` و`frontend/js/utils.js` وصفحات `frontend/pages/`.

---

*تم إعداد هذا الملف ليكون وصفاً ذاتياً للمشروع يمكن إرساله لمساعد ذكاء اصطناعي آخر.*
