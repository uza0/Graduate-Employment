<!-- JoinWork - Header Component -->
<!-- Include this in pages using: <div id="header-placeholder"></div> -->

<header class="header">
  <div class="header-container">
    <a href="/frontend/pages/dashboard.html" class="header-logo">JoinWork</a>
    <nav class="header-nav">
      <a href="/frontend/pages/jobs.html">Jobs Ø§Ù„ÙˆØ¸Ø§Ø¦Ù</a>
      <a href="/frontend/pages/workshops.html">Workshops ÙˆØ±Ø´ Ø§Ù„Ø¹Ù…Ù„</a>
      <a href="/frontend/pages/profile.html">Profile Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ</a>
    </nav>
    <div class="header-user">
      <button id="dark-mode-toggle" class="btn btn-outline btn-sm" onclick="toggleDarkMode()" title="Toggle Dark Mode ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ†">
        <span id="dark-mode-icon">ğŸŒ™</span>
      </button>
      <span id="user-name"></span>
      <button class="btn btn-outline btn-sm" onclick="authAPI.logout()">Logout ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
    </div>
  </div>
</header>

<script>
// Load header into placeholder
document.addEventListener('DOMContentLoaded', function() {
  const placeholder = document.getElementById('header-placeholder');
  if (placeholder) {
    fetch('/frontend/components/header.html')
      .then(response => response.text())
      .then(html => {
        placeholder.innerHTML = html;
        // Update user name if available
        const userData = localStorage.getItem('userData');
        if (userData) {
          try {
            const user = JSON.parse(userData);
            const userNameEl = document.getElementById('user-name');
            if (userNameEl) {
              userNameEl.textContent = user.full_name || user.email;
            }
          } catch (e) {
            console.error('Error parsing user data:', e);
          }
        }
        // Initialize dark mode toggle icon
        updateDarkModeIcon();
      })
      .catch(error => {
        console.error('Error loading header:', error);
        // Fallback: create header directly
        placeholder.innerHTML = `
          <header class="header">
            <div class="header-container">
              <a href="/frontend/pages/dashboard.html" class="header-logo">JoinWork</a>
              <nav class="header-nav">
                <a href="/frontend/pages/jobs.html">Jobs Ø§Ù„ÙˆØ¸Ø§Ø¦Ù</a>
                <a href="/frontend/pages/workshops.html">Workshops ÙˆØ±Ø´ Ø§Ù„Ø¹Ù…Ù„</a>
                <a href="/frontend/pages/profile.html">Profile Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ</a>
              </nav>
              <div class="header-user">
                <button id="dark-mode-toggle" class="btn btn-outline btn-sm" onclick="toggleDarkMode()" title="Toggle Dark Mode ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ†">
                  <span id="dark-mode-icon">ğŸŒ™</span>
                </button>
                <button class="btn btn-outline btn-sm" onclick="window.location.href='/frontend/pages/login.html'">Logout ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
              </div>
            </div>
          </header>
        `;
        // Initialize dark mode toggle icon
        updateDarkModeIcon();
      });
  }
  
  // Initialize dark mode on page load
  initDarkMode();
});
</script>

